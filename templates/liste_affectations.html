{% load static %}
{% include 'header.html' %}

<div class="page-wrapper">
    <div class="content">
        <div class="page-header">
            <div class="page-title">
                <h4>Listes des reservations</h4>
            </div>
            <div class="page-btn">
                <a href="{% url 'ajouter_affectation' %}" class="btn btn-added">
                    <img src="{% static 'img/icons/plus.svg' %}" alt="img" class="me-2">Ajouter une reservation
                </a>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <div class="table-top">
                    <div class="search-set">

                        <div class="search-input">
                            <a class="btn btn-searchset">
                                <img src="{% static 'img/icons/search-white.svg' %}" alt="img">
                            </a>
                        </div>
                    </div>
                    <div class="wordset">
                        <ul>
                            <li>
                                <a href="{% url 'pdf_liste_utilisateurs' %}" target="_blank" data-bs-toggle="tooltip" data-bs-placement="top" title="pdf">
                                    <img  style="width: 40px;" src="{% static 'img/icons/pdf.svg' %}" alt="img">
                                </a>
                            </li>
                            

                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="table-responsive">
            {% if messages %}
                <div class="messages">
                    {% for message in messages %}
                        <div class="alert{% if message.tags %} alert-{{ message.tags }}{% endif %}" role="alert">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        
            <table class="table datanew">
                <thead>
                    <tr>
                        <th>Chambre</th>
                        <th>Date de Début</th>
                        <th>Heure de Début</th>
                        <th>Date de Fin</th>
                        <th>Heure de Fin</th>
                        <th>Client</th>
                        <th>Client Anonyme</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for affectation in affectations %}
                        <tr>
                            <td>{{ affectation.chambre }}</td>
                            <td>{{ affectation.date_debut }}</td>
                            <td>{{ affectation.heure_debut }}</td>
                            <td>{{ affectation.date_fin }}</td>
                            <td>{{ affectation.heure_fin }}</td>
                            <td>{{ affectation.client }}</td>
                            <td>{{ affectation.client_anonyme }}</td>
                            <td>
                                <a class="me-3" href="{% url 'modifier_affectation' affectation.pk %}">
                                    <img src="{% static 'img/icons/edit.svg' %}" alt="edit">
                                </a>
                                <a class="me-3" href="{% url 'supprimer_affectation' affectation.pk %}" onclick="return confirmDelete();">
                                    <img src="{% static 'img/icons/delete.svg' %}" alt="delete">
                                </a>
                                <script>
                                    function confirmDelete() {
                                        return confirm("Êtes-vous sûr de vouloir supprimer cette affectation?");
                                    }
                                </script>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        
        

    </div>
</div>

</div>
</div>
</div>

<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
<script src="{% static 'js/jquery-3.6.0.min.js' %}"></script>
<script src="{% static 'js/feather.min.js' %}"></script>
<script src="{% static 'js/jquery.slimscroll.min.js' %}"></script>
<script src="{% static 'js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'js/dataTables.bootstrap4.min.js' %}"></script>
<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'plugins/select2/js/select2.min.js' %}"></script>
<script src="{% static 'js/moment.min.js' %}"></script>
<script src="{% static 'js/bootstrap-datetimepicker.min.js' %}"></script>
<script src="{% static 'plugins/sweetalert/sweetalert2.all.min.js' %}"></script>
<script src="{% static 'plugins/sweetalert/sweetalerts.min.js' %}"></script>
<script src="{% static 'js/script.js' %}"></script>

</body>

</html>